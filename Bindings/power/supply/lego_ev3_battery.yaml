# SPDX-License-Identifier: None
%YAML 1.2
---
$id: http://devicetree.org/schemas/Bindings/power/supply/lego_ev3_battery.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#
version: 1

title: LEGO MINDSTORMS EV3 Battery

maintainers:
  - David Lechner <david@lechnology.com>
description: |+
  LEGO MINDSTORMS EV3 has some built-in capability for monitoring the battery.
  It uses 6 AA batteries or a special Li-ion rechargeable battery pack that is
  detected by a key switch in the battery compartment.

             

properties:
  compatible:
    items:
      - enum:
          - lego,ev3-battery
          - lego,ev3
      - const: ti,da850
    minItems: 2
    maxItems: 2
    additionalItems: false
  '#address-cells':
    const: 0x1
  '#size-cells':
    const: 0x1
  model:
    items:
      - const: LEGO MINDSTORMS EV3
    minItems: 1
    maxItems: 1
    additionalItems: false
  pinctrl-names:
    items:
      - const: default
    minItems: 1
    maxItems: 1
    additionalItems: false
  pinctrl-0: {}
  io-channels: {}
  io-channel-names:
    items:
      - const: voltage
      - const: current
    minItems: 2
    maxItems: 2
    additionalItems: false
  rechargeable-gpios: {}
examples:
  - |
    battery {
      compatible = "lego,ev3-battery";
      io-channels = <&adc 4>, <&adc 3>;
      io-channel-names = "voltage", "current";
      rechargeable-gpios = <&gpio 136 GPIO_ACTIVE_LOW>;
    };
historical: |+
  LEGO MINDSTORMS EV3 Battery
  ~~~~~~~~~~~~~~~~~~~~~~~~~~~

  LEGO MINDSTORMS EV3 has some built-in capability for monitoring the battery.
  It uses 6 AA batteries or a special Li-ion rechargeable battery pack that is
  detected by a key switch in the battery compartment.

  Required properties:
   - compatible: Must be "lego,ev3-battery"
   - io-channels: phandles to analog inputs for reading voltage and current
   - io-channel-names: Must be "voltage", "current"
   - rechargeable-gpios: phandle to the rechargeable battery indication gpio

...
