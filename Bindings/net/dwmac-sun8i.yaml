# SPDX-License-Identifier: None
%YAML 1.2
---
$id: http://devicetree.org/schemas/Bindings/net/dwmac-sun8i.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#
version: 1

title: Allwinner sun8i GMAC ethernet controller

maintainers:
  - LABBE Corentin <clabbe.montjoie@gmail.com>
  - Corentin Labbe <clabbe.montjoie@gmail.com>
description: |+
  This device is a platform glue layer for stmmac.
  Please see stmmac.txt for the other unchanged properties.

             

properties:
  compatible:
    items:
      - enum:
          - snps,dwmac-mdio
          - allwinner,sun8i-h3-emac
          - allwinner,sun8i-h3-mdio-mux
          - allwinner,sun8i-h3-mdio-internal
          - allwinner,sun8i-a83t-emac
          - allwinner,sun50i-a64-emac
    minItems: 1
    maxItems: 1
    additionalItems: false
  syscon: {}
  reg:
    minItems: 1
    maxItems: 1
    additionalItems: false
  interrupts: {}
  interrupt-names:
    items:
      - const: macirq
    minItems: 1
    maxItems: 1
    additionalItems: false
  resets: {}
  reset-names:
    items:
      - const: stmmaceth
    minItems: 1
    maxItems: 1
    additionalItems: false
  clocks: {}
  clock-names:
    items:
      - const: stmmaceth
    minItems: 1
    maxItems: 1
    additionalItems: false
  '#address-cells':
    const: 0x1
  '#size-cells':
    const: 0x0
  phy-handle: {}
  phy-mode:
    items:
      - const: rgmii
    minItems: 1
    maxItems: 1
    additionalItems: false
  allwinner,leds-active-low:
    description: FIXME
    type: boolean
  pinctrl-names:
    items:
      - const: default
    minItems: 1
    maxItems: 1
    additionalItems: false
  pinctrl-0: {}
  phy-supply: {}
  mdio-parent-bus: {}
historical: |+
  * Allwinner sun8i GMAC ethernet controller

  This device is a platform glue layer for stmmac.
  Please see stmmac.txt for the other unchanged properties.

  Required properties:
  - compatible: must be one of the following string:
  		"allwinner,sun8i-a83t-emac"
  		"allwinner,sun8i-h3-emac"
  		"allwinner,sun8i-v3s-emac"
  		"allwinner,sun50i-a64-emac"
  - reg: address and length of the register for the device.
  - interrupts: interrupt for the device
  - interrupt-names: must be "macirq"
  - clocks: A phandle to the reference clock for this device
  - clock-names: must be "stmmaceth"
  - resets: A phandle to the reset control for this device
  - reset-names: must be "stmmaceth"
  - phy-mode: See ethernet.txt
  - phy-handle: See ethernet.txt
  - #address-cells: shall be 1
  - #size-cells: shall be 0
  - syscon: A phandle to the syscon of the SoC with one of the following
   compatible string:
    - allwinner,sun8i-h3-system-controller
    - allwinner,sun8i-v3s-system-controller
    - allwinner,sun50i-a64-system-controller
    - allwinner,sun8i-a83t-system-controller

  Optional properties:
  - allwinner,tx-delay-ps: TX clock delay chain value in ps. Range value is 0-700. Default is 0)
  - allwinner,rx-delay-ps: RX clock delay chain value in ps. Range value is 0-3100. Default is 0)
  Both delay properties need to be a multiple of 100. They control the delay for
  external PHY.

  Optional properties for the following compatibles:
    - "allwinner,sun8i-h3-emac",
    - "allwinner,sun8i-v3s-emac":
  - allwinner,leds-active-low: EPHY LEDs are active low

  Required child node of emac:
  - mdio bus node: should be named mdio with compatible "snps,dwmac-mdio"

  Required properties of the mdio node:
  - #address-cells: shall be 1
  - #size-cells: shall be 0

  The device node referenced by "phy" or "phy-handle" must be a child node
  of the mdio node. See phy.txt for the generic PHY bindings.

  The following compatibles require that the emac node have a mdio-mux child
  node called "mdio-mux":
    - "allwinner,sun8i-h3-emac"
    - "allwinner,sun8i-v3s-emac":
  Required properties for the mdio-mux node:
    - compatible = "allwinner,sun8i-h3-mdio-mux"
    - mdio-parent-bus: a phandle to EMAC mdio
    - one child mdio for the integrated mdio with the compatible
      "allwinner,sun8i-h3-mdio-internal"
    - one child mdio for the external mdio if present (V3s have none)
  Required properties for the mdio-mux children node:
    - reg: 1 for internal MDIO bus, 2 for external MDIO bus

  The following compatibles require a PHY node representing the integrated
  PHY, under the integrated MDIO bus node if an mdio-mux node is used:
    - "allwinner,sun8i-h3-emac",
    - "allwinner,sun8i-v3s-emac":

  Additional information regarding generic multiplexer properties can be found
  at Documentation/devicetree/bindings/net/mdio-mux.txt

  Required properties of the integrated phy node:
  - clocks: a phandle to the reference clock for the EPHY
  - resets: a phandle to the reset control for the EPHY
  - Must be a child of the integrated mdio

...
