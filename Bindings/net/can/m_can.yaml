# SPDX-License-Identifier: None
%YAML 1.2
---
$id: http://devicetree.org/schemas/Bindings/net/can/m_can.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#
version: 1

title: Bosch MCAN controller Device Tree Bindings

maintainers:
  - Dong Aisheng <b29396@freescale.com>
description: test

properties:
  compatible:
    items:
      - const: bosch,m_can
    minItems: 1
    maxItems: 1
    additionalItems: false
  reg:
    minItems: 2
    maxItems: 2
    additionalItems: false
  reg-names:
    items:
      - const: m_can
      - const: message_ram
    minItems: 2
    maxItems: 2
    additionalItems: false
  interrupts: {}
  interrupt-names:
    items:
      - const: int0
      - const: int1
    minItems: 2
    maxItems: 2
    additionalItems: false
  clocks: {}
  clock-names:
    items:
      - const: hclk
      - const: cclk
    minItems: 2
    maxItems: 2
    additionalItems: false
  assigned-clocks: {}
  assigned-clock-parents: {}
  assigned-clock-rates: {}
  bosch,mram-cfg:
    description: FIXME
  pinctrl-names:
    items:
      - const: default
    minItems: 1
    maxItems: 1
    additionalItems: false
  pinctrl-0: {}
historical: |
  Bosch MCAN controller Device Tree Bindings
  -------------------------------------------------

  Required properties:
  - compatible		: Should be "bosch,m_can" for M_CAN controllers
  - reg			: physical base address and size of the M_CAN
  			  registers map and Message RAM
  - reg-names		: Should be "m_can" and "message_ram"
  - interrupts		: Should be the interrupt number of M_CAN interrupt
  			  line 0 and line 1, could be same if sharing
  			  the same interrupt.
  - interrupt-names	: Should contain "int0" and "int1"
  - clocks		: Clocks used by controller, should be host clock
  			  and CAN clock.
  - clock-names		: Should contain "hclk" and "cclk"
  - pinctrl-<n>		: Pinctrl states as described in bindings/pinctrl/pinctrl-bindings.txt
  - pinctrl-names 	: Names corresponding to the numbered pinctrl states
  - bosch,mram-cfg	: Message RAM configuration data.
  			  Multiple M_CAN instances can share the same Message
  			  RAM and each element(e.g Rx FIFO or Tx Buffer and etc)
  			  number in Message RAM is also configurable,
  			  so this property is telling driver how the shared or
  			  private Message RAM are used by this M_CAN controller.

  			  The format should be as follows:
  			  <offset sidf_elems xidf_elems rxf0_elems rxf1_elems
  			   rxb_elems txe_elems txb_elems>
  			  The 'offset' is an address offset of the Message RAM
  			  where the following elements start from. This is
  			  usually set to 0x0 if you're using a private Message
  			  RAM. The remain cells are used to specify how many
  			  elements are used for each FIFO/Buffer.

  			  M_CAN includes the following elements according to user manual:
  			  11-bit Filter	0-128 elements / 0-128 words
  			  29-bit Filter	0-64 elements / 0-128 words
  			  Rx FIFO 0	0-64 elements / 0-1152 words
  			  Rx FIFO 1	0-64 elements / 0-1152 words
  			  Rx Buffers	0-64 elements / 0-1152 words
  			  Tx Event FIFO	0-32 elements / 0-64 words
  			  Tx Buffers	0-32 elements / 0-576 words

  			  Please refer to 2.4.1 Message RAM Configuration in
  			  Bosch M_CAN user manual for details.

  Optional Subnode:
  - can-transceiver	: Can-transceiver subnode describing maximum speed
  			  that can be used for CAN/CAN-FD modes. See
  			  Documentation/devicetree/bindings/net/can/can-transceiver.txt
  			  for details.
