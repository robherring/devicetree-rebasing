# SPDX-License-Identifier: None
%YAML 1.2
---
$id: http://devicetree.org/schemas/Bindings/serial/rs485.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#
version: 1

title: RS485 serial communications

maintainers:
  - Nicolas Ferre <nicolas.ferre@atmel.com>
description: |+
  The RTS signal is capable of automatically controlling line direction for
  the built-in half-duplex mode.
  The properties described hereafter shall be given to a half-duplex capable
  UART node.

             

properties:
  compatible:
    items:
      - const: atmel,at91sam9260-usart
    minItems: 1
    maxItems: 1
    additionalItems: false
  reg:
    minItems: 1
    maxItems: 1
    additionalItems: false
  interrupts: {}
  atmel,use-dma-rx:
    description: FIXME
    type: boolean
  atmel,use-dma-tx:
    description: FIXME
    type: boolean
  pinctrl-names:
    items:
      - const: default
    minItems: 1
    maxItems: 1
    additionalItems: false
  pinctrl-0: {}
  clocks: {}
  clock-names:
    items:
      - const: usart
    minItems: 1
    maxItems: 1
    additionalItems: false
historical: |+
  * RS485 serial communications

  The RTS signal is capable of automatically controlling line direction for
  the built-in half-duplex mode.
  The properties described hereafter shall be given to a half-duplex capable
  UART node.

  Optional properties:
  - rs485-rts-delay: prop-encoded-array <a b> where:
    * a is the delay between rts signal and beginning of data sent in milliseconds.
        it corresponds to the delay before sending data.
    * b is the delay between end of data sent and rts signal in milliseconds
        it corresponds to the delay after sending data and actual release of the line.
    If this property is not specified, <0 0> is assumed.
  - rs485-rts-active-low: drive RTS low when sending (default is high).
  - linux,rs485-enabled-at-boot-time: empty property telling to enable the rs485
    feature at boot time. It can be disabled later with proper ioctl.
  - rs485-rx-during-tx: empty property that enables the receiving of data even
    whilst sending data.

  RS485 example for Atmel USART:
  	usart0: serial@fff8c000 {
  		compatible = "atmel,at91sam9260-usart";
  		reg = <0xfff8c000 0x4000>;
  		interrupts = <7>;
  		atmel,use-dma-rx;
  		atmel,use-dma-tx;
  		linux,rs485-enabled-at-boot-time;
  		rs485-rts-delay = <0 200>;		// in milliseconds
  	};

...
