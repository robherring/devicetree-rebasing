# SPDX-License-Identifier: None
%YAML 1.2
---
$id: http://devicetree.org/schemas/Bindings/remoteproc/st-rproc.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#
version: 1

title: STMicroelectronics Co-Processor Bindings

maintainers:
  - Lee Jones <lee.jones@linaro.org>
description: |+
  This binding provides support for adjunct processors found on ST SoCs.

  Co-processors can be controlled from the bootloader or the primary OS. If
  the bootloader starts a co-processor, the primary OS must detect its state
  and act accordingly.

             

properties:
  compatible:
    items:
      - const: st,st231-rproc
    minItems: 1
    maxItems: 1
    additionalItems: false
  memory-region: {}
  resets: {}
  reset-names:
    items:
      - const: sw_reset
    minItems: 1
    maxItems: 1
    additionalItems: false
  clocks: {}
  clock-frequency: {}
  st,syscfg:
    description: FIXME
  '#mbox-cells':
    const: 0x1
  mbox-names:
    items:
      - const: vq0_rx
      - const: vq0_tx
      - const: vq1_rx
      - const: vq1_tx
    minItems: 4
    maxItems: 4
    additionalItems: false
  mboxes: {}
examples:
  - |
    audio_reserved: rproc@42000000 {
      compatible = "shared-dma-pool";
      reg = <0x42000000 0x01000000>;
      no-map;
    };

    st231-audio {
      compatible  = "st,st231-rproc";
      memory-region  = <&audio_reserved>;
      resets    = <&softreset STIH407_ST231_AUD_SOFTRESET>;
      reset-names  = "sw_reset";
      clocks    = <&clk_s_c0_flexgen CLK_ST231_AUD_0>;
      clock-frequency  = <600000000>;
      st,syscfg  = <&syscfg_core 0x228>;
    };
historical: |+
  STMicroelectronics Co-Processor Bindings
  ----------------------------------------

  This binding provides support for adjunct processors found on ST SoCs.

  Co-processors can be controlled from the bootloader or the primary OS. If
  the bootloader starts a co-processor, the primary OS must detect its state
  and act accordingly.

  Required properties:
  - compatible		Should be one of:
  				"st,st231-rproc"
  				"st,st40-rproc"
  - memory-region		Reserved memory (See: ../reserved-memory/reserved-memory.txt)
  - resets		Reset lines (See: ../reset/reset.txt)
  - reset-names		Must be "sw_reset" and "pwr_reset"
  - clocks		Clock for co-processor (See: ../clock/clock-bindings.txt)
  - clock-frequency	Clock frequency to set co-processor at if the bootloader
  			hasn't already done so
  - st,syscfg		System configuration register which holds the boot vector
  			for the co-processor
  				1st cell: Phandle to syscon block
  				2nd cell: Boot vector register offset

...
