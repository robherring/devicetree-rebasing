# SPDX-License-Identifier: None
%YAML 1.2
---
$id: http://devicetree.org/schemas/Bindings/gpio/spear_spics.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#
version: 1

title: ST Microelectronics SPEAr SPI CS Driver

maintainers:
  - Shiraz Hashim <shiraz.hashim@st.com>
description: |+
  SPEAr platform provides a provision to control chipselects of ARM PL022 Prime
  Cell spi controller through its system registers, which otherwise remains under
  PL022 control. If chipselect remain under PL022 control then they would be
  released as soon as transfer is over and TxFIFO becomes empty. This is not
  desired by some of the device protocols above spi which expect (multiple)
  transfers without releasing their chipselects.

  Chipselects can be controlled by software by turning them as GPIOs. SPEAr
  provides another interface through system registers through which software can
  directly control each PL022 chipselect. Hence, it is natural for SPEAr to export
  the control of this interface as gpio.

             

properties:
  compatible:
    items:
      - const: st,spear-spics-gpio
    minItems: 1
    maxItems: 1
    additionalItems: false
  reg:
    minItems: 1
    maxItems: 1
    additionalItems: false
  st-spics,peripcfg-reg:
    description: FIXME
  st-spics,sw-enable-bit:
    description: FIXME
  st-spics,cs-value-bit:
    description: FIXME
  st-spics,cs-enable-mask:
    description: FIXME
  st-spics,cs-enable-shift:
    description: FIXME
  gpio-controller: {}
  '#gpio-cells':
    const: 0x2
historical: |+
  === ST Microelectronics SPEAr SPI CS Driver ===

  SPEAr platform provides a provision to control chipselects of ARM PL022 Prime
  Cell spi controller through its system registers, which otherwise remains under
  PL022 control. If chipselect remain under PL022 control then they would be
  released as soon as transfer is over and TxFIFO becomes empty. This is not
  desired by some of the device protocols above spi which expect (multiple)
  transfers without releasing their chipselects.

  Chipselects can be controlled by software by turning them as GPIOs. SPEAr
  provides another interface through system registers through which software can
  directly control each PL022 chipselect. Hence, it is natural for SPEAr to export
  the control of this interface as gpio.

  Required properties:

    * compatible: should be defined as "st,spear-spics-gpio"
    * reg: mentioning address range of spics controller
    * st-spics,peripcfg-reg: peripheral configuration register offset
    * st-spics,sw-enable-bit: bit offset to enable sw control
    * st-spics,cs-value-bit: bit offset to drive chipselect low or high
    * st-spics,cs-enable-mask: chip select number bit mask
    * st-spics,cs-enable-shift: chip select number program offset
    * gpio-controller: Marks the device node as gpio controller
    * #gpio-cells: should be 1 and will mention chip select number

  All the above bit offsets are within peripcfg register.

...
