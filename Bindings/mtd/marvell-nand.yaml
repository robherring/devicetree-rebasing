# SPDX-License-Identifier: None
%YAML 1.2
---
$id: http://devicetree.org/schemas/Bindings/mtd/marvell-nand.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#
version: 1

title: Marvell NAND Flash Controller (NFC)

maintainers:
  - Miquel Raynal <miquel.raynal@free-electrons.com>
description: test

properties:
  compatible:
    items:
      - enum:
          - marvell,armada-8k-nand
          - marvell,armada370-nand
    minItems: 1
    maxItems: 1
    additionalItems: false
  reg:
    minItems: 1
    maxItems: 1
    additionalItems: false
  '#address-cells':
    const: 0x1
  '#size-cells':
    const: 0x1
  interrupts: {}
  clocks: {}
  pinctrl-0: {}
  pinctrl-names:
    items:
      - const: default
    minItems: 1
    maxItems: 1
    additionalItems: false
  num-cs: {}
  marvell,nand-keep-config:
    description: FIXME
    type: boolean
  marvell,nand-enable-arbiter:
    description: FIXME
    type: boolean
  nand-on-flash-bbt: {}
  nand-ecc-strength: {}
  nand-ecc-step-size: {}
  marvell,system-controller:
    description: FIXME
historical: |+
  Marvell NAND Flash Controller (NFC)

  Required properties:
  - compatible: can be one of the following:
      * "marvell,armada-8k-nand-controller"
      * "marvell,armada370-nand-controller"
      * "marvell,pxa3xx-nand-controller"
      * "marvell,armada-8k-nand" (deprecated)
      * "marvell,armada370-nand" (deprecated)
      * "marvell,pxa3xx-nand" (deprecated)
    Compatibles marked deprecated support only the old bindings described
    at the bottom.
  - reg: NAND flash controller memory area.
  - #address-cells: shall be set to 1. Encode the NAND CS.
  - #size-cells: shall be set to 0.
  - interrupts: shall define the NAND controller interrupt.
  - clocks: shall reference the NAND controller clock.
  - marvell,system-controller: Set to retrieve the syscon node that handles
    NAND controller related registers (only required with the
    "marvell,armada-8k-nand[-controller]" compatibles).

  Optional properties:
  - label: see partition.txt. New platforms shall omit this property.
  - dmas: shall reference DMA channel associated to the NAND controller.
    This property is only used with "marvell,pxa3xx-nand[-controller]"
    compatible strings.
  - dma-names: shall be "rxtx".
    This property is only used with "marvell,pxa3xx-nand[-controller]"
    compatible strings.

  Optional children nodes:
  Children nodes represent the available NAND chips.

  Required properties:
  - reg: shall contain the native Chip Select ids (0-3).
  - nand-rb: see nand.txt (0-1).

  Optional properties:
  - marvell,nand-keep-config: orders the driver not to take the timings
    from the core and leaving them completely untouched. Bootloader
    timings will then be used.
  - label: MTD name.
  - nand-on-flash-bbt: see nand.txt.
  - nand-ecc-mode: see nand.txt. Will use hardware ECC if not specified.
  - nand-ecc-algo: see nand.txt. This property is essentially useful when
    not using hardware ECC. Howerver, it may be added when using hardware
    ECC for clarification but will be ignored by the driver because ECC
    mode is chosen depending on the page size and the strength required by
    the NAND chip. This value may be overwritten with nand-ecc-strength
    property.
  - nand-ecc-strength: see nand.txt.
  - nand-ecc-step-size: see nand.txt. Marvell's NAND flash controller does
    use fixed strength (1-bit for Hamming, 16-bit for BCH), so the actual
    step size will shrink or grow in order to fit the required strength.
    Step sizes are not completely random for all and follow certain
    patterns described in AN-379, "Marvell SoC NFC ECC".

  See Documentation/devicetree/bindings/mtd/nand.txt for more details on
  generic bindings.


...
